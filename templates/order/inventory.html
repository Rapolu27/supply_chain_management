{% extends 'user/base.html' %}

{% block title %}Purchase Orders{% endblock %}

{% block sidebar %} 
<div class="sidebar">
    <div class="sidebar-header text-center mb-4">
        <h3>SCM Dashboard</h3>
    </div>
    <a href="/user/dashboard" >Dashboard</a>
    <a href="/product/list" >Product</a>
    <a href="/supplier/list" >Suppliers</a>
    <a href="/purchaseorder/list" >Orders</a>
    <a href="/inventory" class="active">Inventory</a>
    <a href="/reports">Reports</a>
    <a href="/grn-inward">Grn Inward</a>
</div>

{% endblock %}
{% block content %}
    <div class="container-fluid">
<h2>Auto Purchase Orders</h2>

<form method="POST" action="{% url 'auto_generate_purchase_orders' %}">
    {% csrf_token %}
    <button type="submit" class="btn btn-primary">Auto Generate Purchase Orders</button>
</form>

{% if out_of_range_products %}
    <h3>Out of Range Products</h3>
    <ul>
        {% for product in out_of_range_products %}
            <li>{{ product.product.name }} (Stock: {{ product.stock }}, Min: {{ product.min_stock }}, Max: {{ product.max_stock }})</li>
        {% endfor %}
    </ul>
{% endif %}

{% if purchase_orders %}
    <h3>Generated Purchase Orders</h3>
    <ul>
        {% for po in purchase_orders %}
            <li>Product ID: {{ po.product_id }}, Quantity: {{ po.quantity }}, Supplier ID: {{ po.supplier_id }}</li>
        {% endfor %}
    </ul>
{% endif %}
{% endblock %}
